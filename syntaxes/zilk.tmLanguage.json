{
  "fileTypes": ["js", "ts"],
  "injectTo": ["source.ts","source.js","source.zilk"],
  "scopeName": "source.zilk",
  "injectionSelector": "L:source.js -comment -string, L:source.ts -comment -string",
  "patterns": [
    {
      "begin": "((html))(`)",
      "beginCaptures": { "1": { "name": "entity.name.function.tagged-template.zilk" } },
      "end": "(`)",
      "contentName": "meta.embedded.block.html.zilk",
      "patterns": [{ "include": "text.html.basic" }]
    },
    {
      "begin": "((css))(`)",
      "beginCaptures": { "1": { "name": "entity.name.function.tagged-template.zilk" } },
      "end": "(`)",
      "contentName": "meta.embedded.block.css.zilk",
      "patterns": [
        { "include": "source.ts#template-substitution-element" },
        { "include": "source.css" },
        { "include": "string.quoted.other.template.js" }
      ]
    },
    {
      "begin": "((md))(`)",
      "beginCaptures": { "1": { "name": "entity.name.function.tagged-template.zilk" } },
      "end": "(`)(?!`{2})",
      "contentName": "meta.embedded.block.md.zilk",
      "patterns": [
        { "include": "source.ts#template-substitution-element" },
        { "include": "text.html.markdown" },
        { "include": "string.quoted.other.template.js" }
      ]
    },
    {
      "begin": "((glsl))(`)",
      "beginCaptures": { "1": { "name": "entity.name.function.tagged-template.zilk" } },
      "end": "(`)",
      "contentName": "meta.embedded.block.glsl.zilk",
      "patterns": [
        { "include": "source.ts#template-substitution-element" },
        { "include": "text.html.markdown" },
        { "include": "string.quoted.other.template.js" }
      ]
    },
    {
      "begin": "(\\$\\{)",
      "beginCaptures": {
        "1": { "name": "entity.name.tag" }
      },
      "end": "(})",
      "endCaptures": {
        "1": { "name": "entity.name.tag" }
      },
      "patterns": [
        { "include": "source.js" },
        { "include": "source.ts#template-substitution-element" }
      ]
    }
  ]
}
